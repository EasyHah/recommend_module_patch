<template><div class='screen'><TopBar /><div class='body' :class='{ full: ui.fullscreen }' :style="{'--left-w': ui.drawer.leftWidth + 'px', '--right-w': ui.drawer.rightWidth + 'px'}"><MapView class='map'/><div class='drawer left' :class='{ open: ui.drawer.leftOpen || ui.drawer.leftPinned, pinned: ui.drawer.leftPinned }' @mouseenter="ui.hover('left', true)" @mouseleave="ui.hover('left', false)"><div class='drawer-inner fluent-acrylic-strong'><header class='drawer-header'><h3>左侧信息</h3><button class='pin' @click="ui.togglePin('left')">{{ ui.drawer.leftPinned ? '取消固定' : '固定' }}</button></header><LeftSidebar class='panel' /></div><button class='handle' @click="ui.toggleOpen('left')" @dblclick="ui.togglePin('left')" aria-label='toggle left drawer'></button></div><div class='drawer right' :class='{ open: ui.drawer.rightOpen || ui.drawer.rightPinned, pinned: ui.drawer.rightPinned }' @mouseenter="ui.hover('right', true)" @mouseleave="ui.hover('right', false)"><div class='drawer-inner fluent-acrylic-strong'><header class='drawer-header'><h3>右侧信息</h3><button class='pin' @click="ui.togglePin('right')">{{ ui.drawer.rightPinned ? '取消固定' : '固定' }}</button></header><RightSidebar class='panel' /></div><button class='handle' @click="ui.toggleOpen('right')" @dblclick="ui.togglePin('right')" aria-label='toggle right drawer'></button></div></div></div></template><script setup lang='ts'>import TopBar from '@/components/TopBar.vue';import LeftSidebar from '@/components/LeftSidebar.vue';import RightSidebar from '@/components/RightSidebar.vue';import MapView from '@/components/MapView.vue';import { useUIStore } from '@/stores/ui';const ui=useUIStore();</script><style scoped>.screen{height:100vh;display:flex;flex-direction:column}.body{position:relative;flex:1;min-height:0}.body.full>:not(.map){display:none}.body.full .map{margin:8px}.map{position:absolute;inset:8px;border-radius:14px;overflow:hidden}.drawer{position:absolute;top:8px;bottom:8px;transition:transform .25s ease,opacity .25s ease;z-index:50;opacity:.98;pointer-events:none}.drawer.left{left:8px;width:var(--left-w,360px);transform:translateX(calc(-100% + 10px))}.drawer.right{right:8px;width:var(--right-w,360px);transform:translateX(calc(100% - 10px))}.drawer .drawer-inner{position:relative;height:100%;display:flex;flex-direction:column;gap:8px;padding:10px;border-radius:14px;box-sizing:border-box;overflow:hidden}.drawer .drawer-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.drawer .pin{border:1px solid rgba(255,255,255,.15);background:transparent;color:#fff;padding:6px 10px;border-radius:10px;cursor:pointer}.drawer .pin:hover{background:rgba(255,255,255,.08)}.drawer.open,.drawer.pinned{pointer-events:auto;transform:translateX(0)}.handle{position:absolute;top:50%;width:10px;height:72px;transform:translateY(-50%);background:rgba(255,255,255,.35);border:none;border-radius:5px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,.25);pointer-events:auto}.drawer.left .handle{right:-10px}.drawer.right .handle{left:-10px}.handle:hover{background:rgba(255,255,255,.55)}.panel{flex:1;min-height:0}</style>