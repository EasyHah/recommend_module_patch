<template><div ref='el' :class="['echart',{fill}]" :style="fill?{}:{width:'100%',height:(height??220)+'px'}"></div></template><script setup lang='ts'>import * as echarts from 'echarts';import { ref,onMounted,onBeforeUnmount,watch } from 'vue';const props = defineProps<{ indicators:{name:string,max:number}[], values:number[], color?:string, height?:number, fill?:boolean }>();const el = ref<HTMLDivElement|null>(null);let chart: echarts.ECharts|null=null;let ro: ResizeObserver|null=null;const resize=()=>chart?.resize();function render(){if(!chart) return;chart.setOption({tooltip:{},radar:{indicator:props.indicators,splitLine:{lineStyle:{opacity:.3}}},series:[{type:'radar',areaStyle:{opacity:.2},data:[{value:props.values,name:'指标'}]}],color:[props.color??'#4C8BF5']});}onMounted(()=>{chart=echarts.init(el.value!);render();window.addEventListener('resize',resize);ro=new ResizeObserver(resize);ro.observe(el.value!.parentElement||el.value!);});onBeforeUnmount(()=>{window.removeEventListener('resize',resize);ro?.disconnect();chart?.dispose();});watch(()=>[props.values,props.indicators],render,{deep:true});</script><style scoped>.echart.fill{width:100%;height:100%;min-height:0}</style>